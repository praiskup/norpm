#! /bin/bash

# Execute norpm scripts directly from the gitroot dir.

base=$(basename "$0")
base=${base//norpm-/}
base=${base//-/_}
file="norpm/cli/$base.py"


die() { echo >&2 "fatal: $*"; exit 1; }

path=$(dirname "$(readlink -f "$0")")

test -e "$path/$file" || die "$file not found"

exec python3 -c "import sys; sys.path.append(\"$path\"); import norpm.cli.$base; sys.argv[0] = '$0'; norpm.cli.$base._main()" "$@"
